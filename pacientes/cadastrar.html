<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.4.2/css/all.css">
    <link rel="stylesheet" type="text/css" href="/pacientes/cadastrarpaciente.css" />
    <script src="/server.js" type="module"></script> 
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>   
    <script type="text/javascript"></script>
    <script>
      $(document).ready(() => {
        $('#buttoncadastro').click(() => {
          const pacienteData = {
            primeironome: $('#primeironome').val(),
            // Outros campos...
          };

          $.ajax({
            type: 'POST',
            url: 'http://localhost:3000/cadastrarPaciente',
            contentType: 'application/json',
            data: JSON.stringify(pacienteData),
            success: function(response) {
              alert(response);
            },
            error: function(error) {
              alert('Erro ao cadastrar paciente');
              console.error(error);
            }
          });
        });
      });
    </script>
    <title>Cadastrar Paciente</title>
    <script type="text/javascript"></script>   
    <title>Dashboard Paciente</title>
</head>
<body>

<!-- Cabeçalho -->
<header>
    <p>Login | Logout</p>
</header>

<!-- Menu lateral -->
<nav class="nav-principal">
    <ul>    
      <li><a href="/pacientes/pacientes.html"><i class="fas fa-user-plus fa-2x"></i> <p>Paciente</p></a></li>
      <li><a href="/laudos.html"><i class="fas fa-file-alt fa-2x" ></i> <p> Laudos</p></a></li>
      <li><a href="/acompanhamento.html"><i class="fas fa-chart-line fa-2x"></i><p> Relatório</p></a></li>
      <li><a href="/agenda/agendamento.html"><i class="fas fa-calendar-alt fa-2x"></i> <p>Agenda</p></a></li>
      <li><a href="/arquivos.html"><i class="fas fa-file-archive fa-2x"></i><p> Arquivos</p></a></li>
      <li><a href="/financeiro/financeiro.html"><i class="fas fa-money-bill-wave fa-2x"></i><p> Financeiro</p></a></li>
  </ul>
    </ul>
</nav>


<!-- Conteúdo principal -->
<main>
  <nav class="navbar-adicionar">
    <div id="perfil-img">
      <!-- Adicione o elemento <label> para envolver o ícone e o botão -->
      <label for="input-foto" id="trocar-foto-icon">
        <i class="fa-solid fa-user fa-3x"></i><!-- Substitua 'fa-camera' pelo ícone desejado -->
      </label>
  </div>
  
  <!-- Adicione um input file para permitir a seleção de uma nova foto -->
  <input type="file" id="input-foto" style="display: none;">



    <ul>
        <li><a href="/pacientes/principalpaciente.html?id=${id}"><i class="fa-solid fa-user"></i>Principal</a></li>
        <li><a href="#"><i class="fa-solid fa-user"></i>Cadastro</a></li>
        <li><a href="/pacientes/anamnese.html"><i class="fa-solid fa-circle-question"></i>Anamnese</a></li>
        <li><a href="#"><i class="fa-solid fa-comment"></i>Sessões</a></li>
        <li><a href="#"><i class="fa-solid fa-folder-open"></i>Documentos</a></li>
        <li><a href="#"><i class="fa-solid fa-gear"></i>Preferências</a></li>
    </ul>
  </nav>
  
</nav>
    <form id="formCadastro" action="">
      <div class="form-header">
        <div class="title">
          <h1>
            1. Informações Pessoais
          </h1>
        </div>

        <div class="input-group">
          <div class="input-box">
            <label for="primeironome"> Nome</label>
            <input id="primeironome" type="text" name="primeironome" placeholder="Nome do paciente" size="50" required>
          </div>
          <div class="input-box">
            <label for="naturalidade"> Naturalidade</label>
            <input id="naturalidade" type="text" name="naturalidade" placeholder="Naturalidade" size="20" required>
          </div>
          <div class="input-box">  
            <label for="nascimento"> Nascimento</label>
            <input id="nascimento" type="date" name="nascimento" placeholder="Data de Nascimento"  required>
          </div>
          <div class="input-box">
            <label for="cpf"> CPF</label>
            <input id="cpf" type="text" name="cpf" placeholder="Digite o CPF(sem traço e ponto)" size="20" required>
          </div>

          <div class="input-box">
            <label for="email"> E-mail</label>
            <input id="email" type="email" name="email" placeholder="Digite o E-mail" size="20" required>
          </div>

          <div class="input-box">
            <label for="gender"> Gênero</label>
            <select id="gender" name="gender" placeholder="Genero"  required>
              <option value="Masculino">Masculino</option>
              <option value="Faminino">Faminino</option>
              <option value="Agenero">Agenero</option>
              <option value="Genero Fluido">Genero Fluido</option>
              <option value="Não Binario">Não Binario</option> 
              <option value="Transgenero">Transgenero</option> 
              <option value="Prefere não informar">Prefere não informar</option>    
            </select>  
          </div>
          <div class="input-box">
            <label for="celular"> Celular</label>
            <input id="celular" type="text" name="celular" placeholder="(__) _____-____" size="8" required>
          </div>
          <div class="input-box">
            <label for="observacao"> Observação</label>
            <input id="observacao" type="text" name="observacao" placeholder="Observação" size="100"  required>
          </div>



        </div>

        <div class="title">
          <h1>
            2. Financeiro
          </h1>
        </div>
        <div class="input-box">
          <label for="sessao"> Tipo de Sessão</label>
          <select id="sessao" name="sessao" placeholder="Tipo de Sessão" required>
            <option value="Anamnese">Anamnese</option>
            <option value="Sessão">Sessão</option> 
          </select>  
        </div>
        <div class="input-box">
          <label for="valor"> Valor</label>
          <input id="valor" type="text" step="0.01" name="valor" min="0.01" placeholder="R$ 0.00" size="10" required>
        </div>

        <div class="title">
          <h1>
            3. Responsaveis
          </h1>
        </div>
        <div class="input-box">
          <label for="responsavel"> Responsavel</label>
          <input id="responsavel" type="text" name="responsavel" placeholder="Nome do responsavel" size="20" required>
        </div>
        <div class="input-box">
          <label for="telefoneresponsavel"> Telefone do Responsavel</label>
          <input id="telefoneresponsavel" type="tel" name="telefoneresponsavel" placeholder="Telefone do responsavel" size="20" required>
        </div>
      </div>

        

      <div class="cadastrar-bottom">
        <button id="buttoncadastro" type="button" onclick="enviarFormulario()">Cadastrar</button>
      </div>
      </div>
    </form>   
</div>

<script>
  async function enviarFormulario() {
    const form = document.getElementById('formCadastro');
    const formData = new FormData(form);

    try {
      const response = await fetch('http://localhost:3000/cadastrarPaciente', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(Object.fromEntries(formData))
      });

      const data = await response.json();
      alert(data.mensagem);
    } catch (error) {
      console.error(error);
      alert('Erro ao cadastrar paciente');
    }
  }
</script>



</main>



</body>
</html>