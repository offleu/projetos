<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css" />
    <title>Arquivos</title>
</head>
<body>

<!-- Cabeçalho -->
<header>
    <p>Login | Logout</p>
</header>

<!-- Menu lateral -->
<nav>
    <img src="./img/logo.png" class="logo">
    <ul>    
        <li><a href="cadastrar.html">Cadastrar</a></li>
        <li><a href="anamnese.html">Anamnese</a></li>
        <li><a href="laudos.html">Laudos</a></li>
        <li><a href="textoeatestado.html">Textos e Atestado</a></li>
        <li><a href="acompanhamento.html">Acompanhamento</a></li>
        <li><a href="agendamento.html">Agendamento</a></li>
        <li><a href="arquivos.html">Arquivos</a></li>
    </ul>
</nav>

<!-- Conteúdo principal -->
<main>
  <div class = form>
    <form action="#" method="post">
      <div class = "form-header">
        <div class = "title">
          <h1>
            Cadastrar Paciente
          </h1>

        </div>

        <div class = "input-group">
          <div class="input-box">
            <label for = "primeironome"> Nome</label>
            <input id="primeironome" type="text" name="name" placeholder="Nome do paciente" required>
          </div>
          <div class="input-box">
            <label for = "nascimento"> Nascimento</label>
            <input id="nascimento" type="date" name="nascimento" placeholder="Data de Nascimento" required>
          </div>
          <div class="input-box">
            <label for = "cpf"> CPF</label>
            <input id="cpf" type="###.###.###-##" name="cpf" placeholder="Digite o CPF(sem traço e ponto)" required>
          </div>
          <div class="input-box">
            <label for = "responsavel"> Responsavel</label>
            <input id="responsavel" type="text" name="responsavel" placeholder="Nome do responsavel" required>
          </div>
          <div class="input-box">
            <label for = "telefoneresponsavel"> Telefone do Responsavel</label>
            <input id="telefoneresponsavel" type="tel" name="telefoneresponsavel" placeholder="Telefone do responsavel" required>
          </div>
          <div>
          
          <div class="gender-group">
            <div class="input-gender">
              <label for = "genero"> Masculino</label>
              <input id="genero" type="radio" name="genero" placeholder="genero" required>
            </div>
            <div class="input-gender">
              <label for = "genero"> Femenino</label>
              <input id="genero" type="radio" name="genero" placeholder="genero" required>
            </div>
          </div>

        </div>

        <div class = "cadastrar-bottom"> 
          <button a href="#"> Cadastrar
          </button>
  
        </div>

        

        </div>

        

      </div>
    
    </form>

  </div>

  <container>
    <div class="pacientes-cadastrados">
      <h1> 
        Pacientes Cadastrados
      </h1>
      <ListaPacientes/>
    </div>
  </container>
  <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js"></script>
  <script>
    // Configurações do Firebase - Substitua pelos valores do seu projeto Firebase
    var firebaseConfig = {
      apiKey: "AIzaSyDABxRv7TeJCvrJqJxpdK-WAvqElPb8Ex0",
    authDomain: "site-maria-julia.firebaseapp.com",
    projectId: "site-maria-julia",
    storageBucket: "site-maria-julia.appspot.com",
    messagingSenderId: "641579312371",
    appId: "1:641579312371:web:3e7abda6a092df4db58386",
    measurementId: "G-5WEYPJSCS3"
    };

    // Inicializar o Firebase
    firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();

    function cadastrarPaciente() {
      // Obter valores do formulário
      var nome = document.getElementById('primeironome').value;
      var nascimento = document.getElementById('nascimento').value;
      var cpf = document.getElementById('cpf').value;
      var responsavel = document.getElementById('responsavel').value;
      var telefoneresponsavel = document.getElementById('telefoneresponsavel').value;
      var genero = document.querySelector('input[name="genero"]:checked').value;

      // Adicionar paciente ao Firestore
      db.collection("pacientes").add({
        nome: nome,
        nascimento: nascimento,
        cpf: cpf,
        responsavel: responsavel,
        telefoneresponsavel: telefoneresponsavel,
        genero: genero
      })
      .then(function(docRef) {
        console.log("Paciente cadastrado com ID: ", docRef.id);
        alert("Paciente cadastrado com sucesso!");
        limparFormulario();
        carregarPacientes();
      })
      .catch(function(error) {
        console.error("Erro ao cadastrar paciente: ", error);
      });
    }

    function limparFormulario() {
      document.getElementById('primeironome').value = '';
      document.getElementById('nascimento').value = '';
      document.getElementById('cpf').value = '';
      document.getElementById('responsavel').value = '';
      document.getElementById('telefoneresponsavel').value = '';
      document.getElementById('generoM').checked = false;
      document.getElementById('generoF').checked = false;
    }

    function carregarPacientes() {
      // Limpar a lista antes de carregar os pacientes
      var listaPacientes = document.getElementById('listaPacientes');
      listaPacientes.innerHTML = '';

      // Carregar pacientes do Firestore
      db.collection("pacientes").get().then((querySnapshot) => {
        querySnapshot.forEach((doc) => {
          var paciente = doc.data();
          var listItem = document.createElement('li');
          listItem.textContent = `${paciente.nome} - ${paciente.cpf}`;
          listaPacientes.appendChild(listItem);
        });
      });
    }

    // Carregar pacientes ao carregar a página
    document.addEventListener("DOMContentLoaded", function() {
      carregarPacientes();
    });
  </script>

  

</main>

</body>
</html>